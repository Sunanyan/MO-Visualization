<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>分子轨道交互展示</title>
  <script src="https://3Dmol.csb.pitt.edu/build/3Dmol-min.js"></script>
  <style>
    #viewer {
      width: 800px;
      height: 600px;
      border: 1px solid #ccc;
    }
  </style>
</head>
<body>
  <h2>分子轨道交互展示</h2>
  <label for="orbitalSelector">选择分子轨道：</label>
  <select id="orbitalSelector">
    <option value="diene.mo13a.cube">diene.mo13a.cube</option>
    <option value="diene.mo14a.cube">diene.mo14a.cube</option>
    <option value="diene.mo15a.cube">diene.mo15a.cube</option>
    <option value="diene.mo19a.cube">diene.mo19a.cube</option>
  </select>
  
  <div id="viewer"></div>
  
  <script>
    let element = document.getElementById("viewer");
    let viewer = $3Dmol.createViewer(element, { backgroundColor: 'white' });
    
    function loadOrbital(fileUrl) {
      console.log("正在加载文件：", fileUrl);
      viewer.clear();
      // 指定 format: 'cube' 让 3Dmol.js 解析 cube 文件
      $3Dmol.download(fileUrl, viewer, { format: 'cube' }, function(data) {
        console.log("Cube文件数据：", data);
        // 把解析后的数据传入 addVolumetricCube
        viewer.addVolumetricCube(data, { isoval: 0.02, color: "blue", opacity: 0.5 });
        viewer.zoomTo();
        viewer.render();
      });
    }
    
    document.getElementById("orbitalSelector").addEventListener("change", function() {
      loadOrbital(this.value);
    });
    
    // 默认加载第一个分子轨道
    loadOrbital(document.getElementById("orbitalSelector").value);
  </script>
</body>
</html>
